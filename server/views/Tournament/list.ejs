<% include ../Partials/header.ejs %>
<% include ../Partials/main_nav.ejs %>
<div class="title">
    <h1><%= title %></h1>
</div>
<main class="tournament_container">
    <div class="row">
        <div class="offset-md-1 col-m-10">
            <% if(typeof displayName == 'string' && displayName) { %>
                <a href="/tournamentslist/add" class="btn btn-primary mb-3" role="button">
                    <i class="fas fa-plus-circle"></i>Add Tournament</a>
            <% } %>
            <div class="table-container">
                <table class="table table-bordered table-striped table-hover">
                    <!--Table Header-->
                    <tr>
                        <th class="text-center col-3">Name</th> 
                        <th class="text-center col-2">Location</th>
                        <th class="text-center col-2">Start Date</th>
                        <th class="text-center col-2">End Date</th>
                    </tr>        
                    <% for(let count=0; count<TournamentList.length; count++) { %>
                        <tr>
                            <% if(typeof displayName == 'string' && displayName) { %>
                                <td class="text-center col-3"><%= TournamentList[count].Name%></td> 
                                <td class="text-center col-2"><%= TournamentList[count].Location%></td>
                                <td class="text-center col-2"><%= TournamentList[count].Start%></td>
                                <td class="text-center col-2"><%= TournamentList[count].End%></td>
                                <td class="text-center col-1">
                                    <a href="/tournamentslist/edit/<%= TournamentList[count]._id%>"
                                        class="btn btn-primary btn-sm">
                                    <i class="fas fa-pencil-alt"></i>Edit</a>
                                </td>
                                <td class="text-center col-1">
                                    <a href="#" class="btn btn-danger btn-sm" onclick="confirmDelete('<%= TournamentList[count]._id %>')">
                                    <i class="fas fa-trash-alt"></i>Delete</a>
                                </td>    
                            <% } else { %>
                                <td class="text-center col-3"><%= TournamentList[count].Name%></td> 
                                <td class="text-center col-2"><%= TournamentList[count].Location%></td>
                                <td class="text-center col-2"><%= TournamentList[count].Start%></td>
                                <td class="text-center col-2"><%= TournamentList[count].End%></td>
                            <% } %>
                        </tr>
                    <% } %>
                </table>
            </div>
        </div>
    </div>
</main>

<!-- Reference: https://www.w3schools.com/js/js_window_location.asp -->
<script>
    function confirmDelete(id) {
        const confirmation = confirm("Are you sure you want to delete this tournament?");
        if (confirmation) {
            window.location.href = "tournamentslist/delete/" + id;
        }
    }
</script>
<% include ../Partials/footer.ejs %>
